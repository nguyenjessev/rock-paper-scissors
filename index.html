<!DOCTYPE html>
<html>
<head>
    <title>Rock, Paper, Scissors</title>
    <meta charset="UTF-8"/>
    <link href="normalize.css" rel="stylesheet" />

    <style>
        body {
            font-family: Arial, Helvetica, sans-serif;
        }

        #scoreboard {
            display: flex;
            font-size: 3rem;
            justify-content: center;
        }

        #scoreboard div {
            margin: 0 1.2rem;
        }
    </style>
</head>
<body>
    <div id="scoreboard">
        <div>YOU</div>
        <div><span id="playerScore">0</span> - <span id="computerScore">0</span></div>
        <div>CPU</div>
    </div>

    <div>
        <button type="button" class="selection" data-key="rock">ROCK</button>
        <button type="button" class="selection" data-key="paper">PAPER</button>
        <button type="button" class="selection" data-key="scissors">SCISSORS</button>
    </div>

    <script>
        const shapes = ['rock', 'paper', 'scissors'];

        let userScore = 0, computerScore = 0;

        function computerPlay() {
            let num = Math.floor(Math.random()*3);

            return shapes[num];
        }

        function playRound(e) {
            const computerSelection = computerPlay();
            const playerSelection = this.dataset.key;
            const resultCode = shapes.indexOf(playerSelection) - shapes.indexOf(computerSelection);

            switch (true) {
                case resultCode == 0:
                    console.log("Draw! You both chose " + playerSelection);
                    return 0;
                case resultCode == -2:
                case resultCode == 1:
                    console.log("You win! " + ( playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1) ) + " beats " + computerSelection);
                    userScore++;
                    return 1;
                default:
                    console.log("You lose! " + ( playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1) ) + " loses to " + computerSelection);
                    computerScore++;
                    return -1;
            }
        }

        /*
        function game() {
            let userScore = 0;
            let computerScore = 0;

            for (let i = 0; i < 5; i++) {
                let userChoice = "";

                do {
                    userChoice = prompt("Choose rock, paper, or scissors:").toLowerCase();
                    if (shapes.indexOf(userChoice) < 0) {
                        console.log("Invalid input. Please choose rock, paper, or scissors");
                    }
                } while (shapes.indexOf(userChoice) < 0)

                let result = playRound(userChoice, computerPlay());

                if (result == -1) computerScore++;
                if (result == 1) userScore++;
            }

            
            console.log("\nFinal score:");
            console.log("User: " + userScore);
            console.log("Computer: " + computerScore);

            if (userScore > computerScore) {
                console.log("\nYou win!");
            } else if (userScore < computerScore) {
                console.log("\nYou lose!");
            } else {
                console.log("\nDraw!");
            }
        }
        */

        const selectionButtons = document.querySelectorAll('.selection');
        selectionButtons.forEach(button => {
            button.addEventListener('click', playRound);
        })
    </script>
</body>
</html>